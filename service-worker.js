const CACHE_NAME="my-site-cache-v1";const urlsToCache=["/","/index.html","/assets/css/style.css","/assets/js/script.js","/assets/images/icon-app.svg","/assets/images/icon-design.svg","/assets/images/icon-dev.svg","/assets/images/icon-quote.svg","/assets/images/logo.webp","/assets/images/logo.svg","/assets/images/icon-photo.webp","/assets/images/my-avatar.webp"];const CACHE_TTL=24*60*60*1e3;let cacheTimestamp=Date.now();self.addEventListener("install",event=>{event.waitUntil(caches.open(CACHE_NAME).then(cache=>{console.log("Opened cache");return cache.addAll(urlsToCache)}))});self.addEventListener("activate",event=>{const cacheWhitelist=[CACHE_NAME];event.waitUntil(caches.keys().then(cacheNames=>{return Promise.all(cacheNames.map(cacheName=>{if(!cacheWhitelist.includes(cacheName)){return caches["delete"](cacheName)}}))}))});self.addEventListener("fetch",event=>{event.respondWith(caches.match(event.request).then(response=>{if(Date.now()-cacheTimestamp>CACHE_TTL){caches["delete"](CACHE_NAME).then(()=>{console.log("Cache expired, deleting...");cacheTimestamp=Date.now();caches.open(CACHE_NAME).then(cache=>{cache.addAll(urlsToCache)})})}if(response){return response}return fetch(event.request).then(networkResponse=>{caches.open(CACHE_NAME).then(cache=>{cache.put(event.request,networkResponse.clone())});return networkResponse})}))});